<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="./assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="./assets/img/favicon.png">
  <title>
    Poznań University of Technology
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- CSS Files -->
  <link id="pagestyle" href="./assets/css/soft-design-system.css?v=1.0.5" rel="stylesheet" />
</head>

<body class="index-page">
<!-- Navbar -->
<div class="container position-sticky z-index-sticky top-0">
  <div class="row">
    <div class="col-12">
      <nav class="navbar navbar-expand-lg  blur blur-rounded top-0 z-index-fixed shadow position-absolute my-3 py-2 start-0 end-0 mx-4">
        <div class="container-fluid">
          <a class="navbar-brand font-weight-bolder ms-sm-3" href="index.html" rel="tooltip" title="Designed and Coded by Creative Tim" data-placement="bottom">
            Poznań University of Technology
          </a>
          <div class="collapse navbar-collapse pt-3 pb-2 py-lg-0 w-100" id="navigation">
            <ul class="navbar-nav navbar-nav-hover ms-lg-12 ps-lg-5 w-100">
              <li class="nav-item dropdown dropdown-hover mx-2">
                <a class="nav-link ps-2 d-flex justify-content-between cursor-pointer align-items-center" id="dropdownMenuPages" data-bs-toggle="dropdown" aria-expanded="false">
                  Faculties
                  <img src="./assets/img/down-arrow-dark.svg" alt="down-arrow" class="arrow ms-1">
                </a>
                <div class="dropdown-menu dropdown-menu-animation dropdown-md p-3 border-radius-lg mt-0 mt-lg-3" aria-labelledby="dropdownMenuPages">
                  <div class="d-none d-lg-block" id="facultiesMenu">
                    <template id="faculty-link">
                      <a data-faculty-link href="./courses.html" class="dropdown-item border-radius-md">
                        <span data-faculty-link-body class="ps-3">Faculty of Architecture</span>
                      </a>
                    </template>
                  </div>
                </div>
              </li>
              <li class="nav-item ms-lg-auto">
                <a id="signin" href="sign-in.html" class="btn btn-sm  bg-gradient-primary  btn-round mb-0 me-1 mt-2 mt-md-0">Sign in</a>
                <p id="identity" class="d-inline text-sm z-index-1 font-weight-bold" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">Arthur COAT</p>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- End Navbar -->
    </div>
  </div>
  </div>
  <header class="header-2">
    <div class="page-header min-vh-50" style="background-image: url('./assets/img/curved-images/curved.jpg')">
      <div class="container">
        <div class="row">
          <div class="col-lg-7 text-center mx-auto">
            <h1 class="text-white pt-3 mt-n5">Poznań University of Technology</h1>
            <p class="lead text-white mt-3">Study programs</p>
          </div>
        </div>
      </div>
      <div class="position-absolute w-100 z-index-1 bottom-0">
        <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 40" preserveAspectRatio="none" shape-rendering="auto">
          <defs>
            <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
          </defs>
          <g class="moving-waves">
            <use xlink:href="#gentle-wave" x="48" y="-1" fill="rgba(255,255,255,0.40" />
            <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(255,255,255,0.35)" />
            <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(255,255,255,0.25)" />
            <use xlink:href="#gentle-wave" x="48" y="8" fill="rgba(255,255,255,0.20)" />
            <use xlink:href="#gentle-wave" x="48" y="13" fill="rgba(255,255,255,0.15)" />
            <use xlink:href="#gentle-wave" x="48" y="16" fill="rgba(255,255,255,0.95" />
          </g>
        </svg>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="row justify-content-center text-center my-sm-5">
        <div class="col-lg-6">
          <h2 class="text-primary text-gradient">List of faculties</h2>
        </div>
      </div>
    </div>
    <section id="faculties">
      <template id="faculty-card">
        <div class="col-lg-6 col-12">
          <div class="card card-profile overflow-hidden z-index-2">
            <div class="row">
              <div class="col-lg-4 col-md-6 col-12 pe-lg-0">
                <a href="courses.html" data-faculty-card-image-link>
                  <div class="p-3 pe-md-0">
                    <img class="w-100 border-radius-md" src="assets/img/faculty/faculty-architecture.webp" alt="image" data-faculty-card-image>
                  </div>
                </a>
              </div>
              <div class="col-lg-8 col-md-6 col-12 ps-lg-0 my-auto">
                <div class="card-body">
                  <a href="courses.html" data-faculty-card-body-link>
                    <h5 class="mb-0" data-faculty-card-title>Faculty of Architecture</h5>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </template>
    </section>
  </div>

  <!-- -------   END PRE-FOOTER 2 - simple social line w/ title & 3 buttons    -------- -->
  <footer class="footer pt-5 mt-5">
    <hr class="horizontal dark mb-5">
    <div class="container">
      <div class=" row">
        <div class="col-md-3 mb-4 ms-auto">
          <div>
            <h6 class="text-gradient text-primary font-weight-bolder">Poznań University of Technology</h6>
          </div>
        </div>
        <div class="col-12">
          <div class="text-center">
            <p class="my-4 text-sm">
              All rights reserved. Copyright © <script>
                document.write(new Date().getFullYear())
              </script> Soft UI Design System by <a href="https://www.creative-tim.com" target="_blank">Creative Tim</a>.
            </p>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <script type="text/javascript">
    const BASE_URL = 'http://localhost:8080';
    const FACULTIES_URL = 'faculties';

    fetch(`${BASE_URL}/${FACULTIES_URL}`)
    .then(response => response.json())
    .then(data => {
      createFacultiesLink(data);
      createCards(data);
    })
    .catch(error => console.error('Request failed', error));
    
    /**
     * Create Faculty links
     */
    function createFacultiesLink(faculties) {
      if ('content' in document.createElement('template')) {
        var facultiesMenu = document.querySelector("#facultiesMenu");
        var template = document.querySelector('#faculty-link');

        faculties.forEach((faculty, index) => {
          var clone = template.content.cloneNode(true);
          clone.querySelector('[data-faculty-link]').href = `courses.html?faculty=${faculty.id}`;
          clone.querySelector('[data-faculty-link-body]').textContent = `Faculty of ${faculty.name}`;
          // Add new faculty link
          facultiesMenu.appendChild(clone)
        });
      } else {
        console.error('Template not supported!')
      // Find another way to add the rows to the table because
      // the HTML template element is not supported.
      }
    }

    /**
     * Create Faculty cards with a card template
     */
    const nbFacultyCardsByRow = 2;
    function createCards(faculties) {
      if ('content' in document.createElement('template')) {
        var facultiesSection = document.querySelector("#faculties");
        var template = document.querySelector('#faculty-card');
        var lastRow;

        faculties.forEach((faculty, index) => {
          var clone = template.content.cloneNode(true);
          clone.querySelector('[data-faculty-card-image]').src = `assets/img/faculties/${faculty.imageUrl}`;
          clone.querySelector('[data-faculty-card-image-link]').href = `courses.html?faculty=${faculty.id}`;
          clone.querySelector('[data-faculty-card-body-link]').href = `courses.html?faculty=${faculty.id}`;
          clone.querySelector('[data-faculty-card-title]').textContent = `Faculty of ${faculty.name}`;
          if (index % nbFacultyCardsByRow == 0) {
            // create row
            lastRow = document.createElement("div");
            facultiesSection.appendChild(lastRow).className = "row mt-4";
          }
          // Add new faculty card
          lastRow.appendChild(clone);
        });
      } else {
        console.error('Template not supported!')
      // Find another way to add the rows to the table because
      // the HTML template element is not supported.
      }
    }

    if (window.localStorage.getItem("token")) {
      document.querySelector('#signin').style.display = "none";
      const firstName = window.localStorage.getItem("firstname");
      const lastName = window.localStorage.getItem("lastname");
      document.querySelector('#identity').textContent = `${firstName} ${lastName}`;
    } else {
      document.querySelector('#identity').textContent = "";
      document.querySelector('#signin').textContent = "Sign in";
    }
  </script>
</body>

</html>
